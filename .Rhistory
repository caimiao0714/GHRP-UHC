ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha(0.1)))+
guides(color=guide_legend(title="Country income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha(0.1)))+
guides(color=guide_legend(title="Country income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha(0.1)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha(0.4)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha(1)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha(0.6)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(1, 0.3),
legend.background = element_rect(fill=alpha('white', 0.6)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.8, 0.25),
legend.background = element_rect(fill=alpha('white', 0.6)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.95, 0.26),
legend.background = element_rect(fill=alpha('white', 0.6)))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.95, 0.26),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.95, 0.1),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.95, 0.05),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.95, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(0.1, 1), legend.position = c(0.95, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.95, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.1, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.3, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.5, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.07),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal", legend.box.background = element_rect(colour = "black"))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.3)), legend.direction="horizontal", legend.box.background = element_rect(colour = "black", alpha = 0.5))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.3)),
legend.direction="horizontal",
legend.box.background = element_rect(colour = "black"))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.3)),
legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.8)),
legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.8)),
legend.direction="horizontal", text=element_text(family="Times New Roman"))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
## Solution 2
windowsFonts(TNR = windowsFont("Times New Roman"))
warnings()
windowsFonts(Times=windowsFont("Times New Roman"))
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.8)),
legend.direction="horizontal", text=element_text(family="Times"))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'Hi'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.8)),
legend.direction="horizontal")+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = ifelse(`Country Income Group` == 'Hi',
'High', `Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'High'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.8)),
legend.direction="horizontal", text=element_text(family="Times"))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
pacman::p_load(tidyverse)
f0 = readr::read_csv('Data/f0.csv')
# adjusting legend alpha:
# https://stackoverflow.com/questions/40944239/removing-ggplot2-legend-removes-whole-data-from-the-plot
windowsFonts(Times=windowsFont("Times New Roman"))
f0 %>%
filter(!is.na(`Country Income Group`)) %>%
mutate(`Country Income Group` = ifelse(`Country Income Group` == 'Hi',
'High', `Country Income Group`)) %>%
mutate(`Country Income Group` = factor(`Country Income Group`,
levels = c('Low', 'Low-Mid', 'Up-Mid', 'High'))) %>%
ggplot(aes(x = Year, y = `Life expectancy`,
group = `Country Name`, color = `Country Income Group`)) +
geom_line(alpha = 0.5, size = 0.4) +
theme_bw() + ylab('Life expectancy in each country') +
scale_x_continuous("Year", labels = as.character(2000:2015), breaks = 2000:2015)+
theme(legend.justification = c(1, 1), legend.position = c(0.6, 0.1),
legend.background = element_rect(fill=alpha('white', 0.8)),
legend.direction="horizontal", text=element_text(family="Times"))+
guides(color=guide_legend(title="Income group",
override.aes = list(alpha = 1, size = 2)))
# Country Income Group, Country WHO Region
ggsave('Figures/fig1.pdf', width = 10, height = 6.18)
f0 = readr::read_csv('Data/f0.csv')
pacman::p_load(rstanarm, dplyr)
count(f0, CountryName)
names(f0)=c('CountryName', 'CountryCode', 'WHORegion', 'IncomeGroup', 'Year', "CFACHE_SHA2011", "CHEGDP_SHA2011", "CHE_pc_PPP_SHA2011", "CHE_pc_US_SHA2011", "CHICHE_SHA2011", "DOMCHE_SHA2011", "GFACHE_SHA2011", "GGHEDCHE_SHA2011", "GGHEDGDP_SHA2011", "GGHEDGGE_SHA2011", "GGHED_pc_PPP_SHA2011", "GGHED_pc_US_SHA2011", "OOP_pc_PPP_SHA2011", "OOP_pc_US_SHA2011", "OOPSCHE_SHA2011", "OTHERCHE_SHA2011", "PVTDCHE_SHA2011", "PVTD_pc_PPP_SHA2011", "PVTD_pc_US_SHA2011", "sha11FS", "sha11FS1", "sha11FS11", "sha11FS5", "sha11FS6", "sha11FS61", "sha11HF", "sha11HF1", "sha11HF11", "sha11HF2", "sha11HF21", "sha11HF3", "VFACHE_SHA2011", "VHICHE_SHA2011", "Status", "Lifeexpectancy", "AdultMortality", "infantdeaths", "Alcohol", "percentageexpenditure", "HepatitisB", "Measles", "BMI", "underfivedeaths", "Polio", "Totalexpenditure", "Diphtheria", "HIVAIDS", "GDP", "Population", "thinness119", "thinness59", "IncomeComp", "Schooling")
count(f0, CountryName)
data(warpbreaks)
head
head(warpbreaks)
pacman::p_load(rstanarm, dplyr)
f0 = readr::read_csv('Data/f0.csv')
names(f0)=c('CountryName', 'CountryCode', 'WHORegion', 'IncomeGroup', 'Year', "CFACHE_SHA2011", "CHEGDP_SHA2011", "CHE_pc_PPP_SHA2011", "CHE_pc_US_SHA2011", "CHICHE_SHA2011", "DOMCHE_SHA2011", "GFACHE_SHA2011", "GGHEDCHE_SHA2011", "GGHEDGDP_SHA2011", "GGHEDGGE_SHA2011", "GGHED_pc_PPP_SHA2011", "GGHED_pc_US_SHA2011", "OOP_pc_PPP_SHA2011", "OOP_pc_US_SHA2011", "OOPSCHE_SHA2011", "OTHERCHE_SHA2011", "PVTDCHE_SHA2011", "PVTD_pc_PPP_SHA2011", "PVTD_pc_US_SHA2011", "sha11FS", "sha11FS1", "sha11FS11", "sha11FS5", "sha11FS6", "sha11FS61", "sha11HF", "sha11HF1", "sha11HF11", "sha11HF2", "sha11HF21", "sha11HF3", "VFACHE_SHA2011", "VHICHE_SHA2011", "Status", "Lifeexpectancy", "AdultMortality", "infantdeaths", "Alcohol", "percentageexpenditure", "HepatitisB", "Measles", "BMI", "underfivedeaths", "Polio", "Totalexpenditure", "Diphtheria", "HIVAIDS", "GDP", "Population", "thinness119", "thinness59", "IncomeComp", "Schooling")
fit00 = (
Lifeexpectancy ~ sha11HF1 + sha11HF11 + Year + IncomeGroup + CountryName ,
data = f0)
fit00 = lm(
Lifeexpectancy ~ sha11HF1 + sha11HF11 + Year + IncomeGroup + CountryName,
data = f0)
broom::tidy(fit00, intervals = TRUE, prob = 0.95)
fit00
summary(fit00)
fit00 = lm(
Lifeexpectancy ~ sha11HF3 + sha11HF1 + sha11HF11 + Year + IncomeGroup + CountryName,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~ sha11HF3 + sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~ sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~ CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~ Population + CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~ GDP + CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~  CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~  GGHEDCHE_SHA2011 + PVTDCHE_SHA2011 + GGHEDGDP_SHA2011 + CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~  OOP_pc_US_SHA2011 + GGHEDCHE_SHA2011 + PVTDCHE_SHA2011 + GGHEDGDP_SHA2011 + CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
fit00 = lm(
Lifeexpectancy ~  CHICHE_SHA2011 + OOP_pc_US_SHA2011 + GGHEDCHE_SHA2011 + PVTDCHE_SHA2011 + GGHEDGDP_SHA2011 + CFACHE_SHA2011 + CHEGDP_SHA2011 + CHE_pc_PPP_SHA2011 + sha11HF3 + sha11HF21+ sha11HF1 + sha11HF11 + Year + IncomeGroup ,
data = f0)
summary(fit00)
codebook = data.table::fread('Data/codebook1.csv')
d0 = data.table::fread('Data/alldat.csv')
codebook = d0[!duplicated(d0$`Indicator Code`),5:7]
d1 = d0 %>%
select(`Country Name`, `Country Code`, `Country WHO Region`, `Country Income Group`,
`Indicator Code`, Year, Value) %>%
spread(`Indicator Code`, Value) %>%
select(c(1:ncol(.))[colSums(is.na(.)) < 500])
pacman::p_load(tidyverse, tidyr)
d1 = d0 %>%
select(`Country Name`, `Country Code`, `Country WHO Region`, `Country Income Group`,
`Indicator Code`, Year, Value) %>%
spread(`Indicator Code`, Value) %>%
select(c(1:ncol(.))[colSums(is.na(.)) < 500])
var_sel = names(d1)
codebook1 = codebook[codebook$`Indicator Code` %in% names(d1),]
data.table::fwrite(codebook1, 'Data/codebook1.csv')
